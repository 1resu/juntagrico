{% extends "no_menu_base.html" %}
{% load i18n %}
{% load juntagrico.config %}
{% block allcontent %}
    <div class="offset-md-2 col-md-8">

        {% if validlink %}

        <p>{% translate "Please enter your new password twice so we can verify you typed it in correctly." %}</p>

        <form method="post">
        <fieldset class="module aligned">
            {% csrf_token %}
            <input type="hidden" autocomplete="username" value="{{ form.user.get_username }}">
            <div class="form-group row field-password1">
                <label class="control-label col-md-3" for="id_new_password1">{% translate 'New password:' %}</label>
                <div class="controls col-md-6">
                    <input type="password" name="new_password1" autocomplete="new-password" required="" class="form-control" id="id_new_password1">
                </div>
            </div>
            <div class="form-group row field-password2">
                <label class="control-label col-md-3" for="id_new_password2">{% translate 'Confirm password:' %}</label>
                <div class="controls col-md-6">
                    <input type="password" name="new_password2" autocomplete="new-password" required="" class="form-control" id="id_new_password2">
                </div>
            </div>

            {% if form.new_password1.errors or form.new_password2.errors %}
            <div class="alert alert-danger mb-3">
                {{ form.new_password1.errors }}
                {{ form.new_password2.errors }}
            </div>
            {% endif %}

            <div class="offset-md-3 col-md-6">
                <input type="submit" class="btn btn-success" value="{% translate 'Change my password' %}">
            </div>
        </fieldset>
        </form>

        {% else %}

        <div class="alert alert-danger">
            <p>{% translate "The password reset link was invalid, possibly because it has already been used.  Please request a new password reset." %}</p>
        </div>

        {% endif %}
    </div>
{% endblock %}
